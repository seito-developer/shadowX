{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _postcssFunctions = _interopRequireDefault(require(\"postcss-functions\"));\n\nvar _didyoumean = _interopRequireDefault(require(\"didyoumean\"));\n\nvar _transformThemeValue = _interopRequireDefault(require(\"../util/transformThemeValue\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction findClosestExistingPath(theme, path) {\n  const parts = _lodash.default.toPath(path);\n\n  do {\n    parts.pop();\n    if (_lodash.default.hasIn(theme, parts)) break;\n  } while (parts.length);\n\n  return parts.length ? parts : undefined;\n}\n\nfunction pathToString(path) {\n  if (typeof path === 'string') return path;\n  return path.reduce((acc, cur, i) => {\n    if (cur.includes('.')) return `${acc}[${cur}]`;\n    return i === 0 ? cur : `${acc}.${cur}`;\n  }, '');\n}\n\nfunction list(items) {\n  return items.map(key => `'${key}'`).join(', ');\n}\n\nfunction listKeys(obj) {\n  return list(Object.keys(obj));\n}\n\nfunction validatePath(config, path, defaultValue) {\n  const pathString = Array.isArray(path) ? pathToString(path) : _lodash.default.trim(path, `'\"`);\n  const pathSegments = Array.isArray(path) ? path : _lodash.default.toPath(pathString);\n\n  const value = _lodash.default.get(config.theme, pathString, defaultValue);\n\n  if (typeof value === 'undefined') {\n    let error = `'${pathString}' does not exist in your theme config.`;\n    const parentSegments = pathSegments.slice(0, -1);\n\n    const parentValue = _lodash.default.get(config.theme, parentSegments);\n\n    if (_lodash.default.isObject(parentValue)) {\n      const validKeys = Object.keys(parentValue).filter(key => validatePath(config, [...parentSegments, key]).isValid);\n      const suggestion = (0, _didyoumean.default)(_lodash.default.last(pathSegments), validKeys);\n\n      if (suggestion) {\n        error += ` Did you mean '${pathToString([...parentSegments, suggestion])}'?`;\n      } else if (validKeys.length > 0) {\n        error += ` '${pathToString(parentSegments)}' has the following valid keys: ${list(validKeys)}`;\n      }\n    } else {\n      const closestPath = findClosestExistingPath(config.theme, pathString);\n\n      if (closestPath) {\n        const closestValue = _lodash.default.get(config.theme, closestPath);\n\n        if (_lodash.default.isObject(closestValue)) {\n          error += ` '${pathToString(closestPath)}' has the following keys: ${listKeys(closestValue)}`;\n        } else {\n          error += ` '${pathToString(closestPath)}' is not an object.`;\n        }\n      } else {\n        error += ` Your theme has the following top-level keys: ${listKeys(config.theme)}`;\n      }\n    }\n\n    return {\n      isValid: false,\n      error\n    };\n  }\n\n  if (!(typeof value === 'string' || typeof value === 'number' || typeof value === 'function' || value instanceof String || value instanceof Number || Array.isArray(value))) {\n    let error = `'${pathString}' was found but does not resolve to a string.`;\n\n    if (_lodash.default.isObject(value)) {\n      let validKeys = Object.keys(value).filter(key => validatePath(config, [...pathSegments, key]).isValid);\n\n      if (validKeys.length) {\n        error += ` Did you mean something like '${pathToString([...pathSegments, validKeys[0]])}'?`;\n      }\n    }\n\n    return {\n      isValid: false,\n      error\n    };\n  }\n\n  const [themeSection] = pathSegments;\n  return {\n    isValid: true,\n    value: (0, _transformThemeValue.default)(themeSection)(value)\n  };\n}\n\nfunction _default(config) {\n  return root => (0, _postcssFunctions.default)({\n    functions: {\n      theme: (path, ...defaultValue) => {\n        const {\n          isValid,\n          value,\n          error\n        } = validatePath(config, path, defaultValue.length ? defaultValue : undefined);\n\n        if (!isValid) {\n          throw root.error(error);\n        }\n\n        return value;\n      }\n    }\n  })(root);\n}","map":{"version":3,"sources":["/Users/seito/Documents/develop/count-jp/my-app/node_modules/tailwindcss/lib/lib/evaluateTailwindFunctions.js"],"names":["Object","defineProperty","exports","value","default","_default","_lodash","_interopRequireDefault","require","_postcssFunctions","_didyoumean","_transformThemeValue","obj","__esModule","findClosestExistingPath","theme","path","parts","toPath","pop","hasIn","length","undefined","pathToString","reduce","acc","cur","i","includes","list","items","map","key","join","listKeys","keys","validatePath","config","defaultValue","pathString","Array","isArray","trim","pathSegments","get","error","parentSegments","slice","parentValue","isObject","validKeys","filter","isValid","suggestion","last","closestPath","closestValue","String","Number","themeSection","root","functions"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,QAAlB;;AAEA,IAAIC,OAAO,GAAGC,sBAAsB,CAACC,OAAO,CAAC,QAAD,CAAR,CAApC;;AAEA,IAAIC,iBAAiB,GAAGF,sBAAsB,CAACC,OAAO,CAAC,mBAAD,CAAR,CAA9C;;AAEA,IAAIE,WAAW,GAAGH,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAxC;;AAEA,IAAIG,oBAAoB,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,6BAAD,CAAR,CAAjD;;AAEA,SAASD,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAER,IAAAA,OAAO,EAAEQ;AAAX,GAArC;AAAwD;;AAE/F,SAASE,uBAAT,CAAiCC,KAAjC,EAAwCC,IAAxC,EAA8C;AAC5C,QAAMC,KAAK,GAAGX,OAAO,CAACF,OAAR,CAAgBc,MAAhB,CAAuBF,IAAvB,CAAd;;AAEA,KAAG;AACDC,IAAAA,KAAK,CAACE,GAAN;AACA,QAAIb,OAAO,CAACF,OAAR,CAAgBgB,KAAhB,CAAsBL,KAAtB,EAA6BE,KAA7B,CAAJ,EAAyC;AAC1C,GAHD,QAGSA,KAAK,CAACI,MAHf;;AAKA,SAAOJ,KAAK,CAACI,MAAN,GAAeJ,KAAf,GAAuBK,SAA9B;AACD;;AAED,SAASC,YAAT,CAAsBP,IAAtB,EAA4B;AAC1B,MAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B,OAAOA,IAAP;AAC9B,SAAOA,IAAI,CAACQ,MAAL,CAAY,CAACC,GAAD,EAAMC,GAAN,EAAWC,CAAX,KAAiB;AAClC,QAAID,GAAG,CAACE,QAAJ,CAAa,GAAb,CAAJ,EAAuB,OAAQ,GAAEH,GAAI,IAAGC,GAAI,GAArB;AACvB,WAAOC,CAAC,KAAK,CAAN,GAAUD,GAAV,GAAiB,GAAED,GAAI,IAAGC,GAAI,EAArC;AACD,GAHM,EAGJ,EAHI,CAAP;AAID;;AAED,SAASG,IAAT,CAAcC,KAAd,EAAqB;AACnB,SAAOA,KAAK,CAACC,GAAN,CAAUC,GAAG,IAAK,IAAGA,GAAI,GAAzB,EAA6BC,IAA7B,CAAkC,IAAlC,CAAP;AACD;;AAED,SAASC,QAAT,CAAkBtB,GAAlB,EAAuB;AACrB,SAAOiB,IAAI,CAAC7B,MAAM,CAACmC,IAAP,CAAYvB,GAAZ,CAAD,CAAX;AACD;;AAED,SAASwB,YAAT,CAAsBC,MAAtB,EAA8BrB,IAA9B,EAAoCsB,YAApC,EAAkD;AAChD,QAAMC,UAAU,GAAGC,KAAK,CAACC,OAAN,CAAczB,IAAd,IAAsBO,YAAY,CAACP,IAAD,CAAlC,GAA2CV,OAAO,CAACF,OAAR,CAAgBsC,IAAhB,CAAqB1B,IAArB,EAA4B,IAA5B,CAA9D;AACA,QAAM2B,YAAY,GAAGH,KAAK,CAACC,OAAN,CAAczB,IAAd,IAAsBA,IAAtB,GAA6BV,OAAO,CAACF,OAAR,CAAgBc,MAAhB,CAAuBqB,UAAvB,CAAlD;;AAEA,QAAMpC,KAAK,GAAGG,OAAO,CAACF,OAAR,CAAgBwC,GAAhB,CAAoBP,MAAM,CAACtB,KAA3B,EAAkCwB,UAAlC,EAA8CD,YAA9C,CAAd;;AAEA,MAAI,OAAOnC,KAAP,KAAiB,WAArB,EAAkC;AAChC,QAAI0C,KAAK,GAAI,IAAGN,UAAW,wCAA3B;AACA,UAAMO,cAAc,GAAGH,YAAY,CAACI,KAAb,CAAmB,CAAnB,EAAsB,CAAC,CAAvB,CAAvB;;AAEA,UAAMC,WAAW,GAAG1C,OAAO,CAACF,OAAR,CAAgBwC,GAAhB,CAAoBP,MAAM,CAACtB,KAA3B,EAAkC+B,cAAlC,CAApB;;AAEA,QAAIxC,OAAO,CAACF,OAAR,CAAgB6C,QAAhB,CAAyBD,WAAzB,CAAJ,EAA2C;AACzC,YAAME,SAAS,GAAGlD,MAAM,CAACmC,IAAP,CAAYa,WAAZ,EAAyBG,MAAzB,CAAgCnB,GAAG,IAAII,YAAY,CAACC,MAAD,EAAS,CAAC,GAAGS,cAAJ,EAAoBd,GAApB,CAAT,CAAZ,CAA+CoB,OAAtF,CAAlB;AACA,YAAMC,UAAU,GAAG,CAAC,GAAG3C,WAAW,CAACN,OAAhB,EAAyBE,OAAO,CAACF,OAAR,CAAgBkD,IAAhB,CAAqBX,YAArB,CAAzB,EAA6DO,SAA7D,CAAnB;;AAEA,UAAIG,UAAJ,EAAgB;AACdR,QAAAA,KAAK,IAAK,kBAAiBtB,YAAY,CAAC,CAAC,GAAGuB,cAAJ,EAAoBO,UAApB,CAAD,CAAkC,IAAzE;AACD,OAFD,MAEO,IAAIH,SAAS,CAAC7B,MAAV,GAAmB,CAAvB,EAA0B;AAC/BwB,QAAAA,KAAK,IAAK,KAAItB,YAAY,CAACuB,cAAD,CAAiB,mCAAkCjB,IAAI,CAACqB,SAAD,CAAY,EAA7F;AACD;AACF,KATD,MASO;AACL,YAAMK,WAAW,GAAGzC,uBAAuB,CAACuB,MAAM,CAACtB,KAAR,EAAewB,UAAf,CAA3C;;AAEA,UAAIgB,WAAJ,EAAiB;AACf,cAAMC,YAAY,GAAGlD,OAAO,CAACF,OAAR,CAAgBwC,GAAhB,CAAoBP,MAAM,CAACtB,KAA3B,EAAkCwC,WAAlC,CAArB;;AAEA,YAAIjD,OAAO,CAACF,OAAR,CAAgB6C,QAAhB,CAAyBO,YAAzB,CAAJ,EAA4C;AAC1CX,UAAAA,KAAK,IAAK,KAAItB,YAAY,CAACgC,WAAD,CAAc,6BAA4BrB,QAAQ,CAACsB,YAAD,CAAe,EAA3F;AACD,SAFD,MAEO;AACLX,UAAAA,KAAK,IAAK,KAAItB,YAAY,CAACgC,WAAD,CAAc,qBAAxC;AACD;AACF,OARD,MAQO;AACLV,QAAAA,KAAK,IAAK,iDAAgDX,QAAQ,CAACG,MAAM,CAACtB,KAAR,CAAe,EAAjF;AACD;AACF;;AAED,WAAO;AACLqC,MAAAA,OAAO,EAAE,KADJ;AAELP,MAAAA;AAFK,KAAP;AAID;;AAED,MAAI,EAAE,OAAO1C,KAAP,KAAiB,QAAjB,IAA6B,OAAOA,KAAP,KAAiB,QAA9C,IAA0D,OAAOA,KAAP,KAAiB,UAA3E,IAAyFA,KAAK,YAAYsD,MAA1G,IAAoHtD,KAAK,YAAYuD,MAArI,IAA+IlB,KAAK,CAACC,OAAN,CAActC,KAAd,CAAjJ,CAAJ,EAA4K;AAC1K,QAAI0C,KAAK,GAAI,IAAGN,UAAW,+CAA3B;;AAEA,QAAIjC,OAAO,CAACF,OAAR,CAAgB6C,QAAhB,CAAyB9C,KAAzB,CAAJ,EAAqC;AACnC,UAAI+C,SAAS,GAAGlD,MAAM,CAACmC,IAAP,CAAYhC,KAAZ,EAAmBgD,MAAnB,CAA0BnB,GAAG,IAAII,YAAY,CAACC,MAAD,EAAS,CAAC,GAAGM,YAAJ,EAAkBX,GAAlB,CAAT,CAAZ,CAA6CoB,OAA9E,CAAhB;;AAEA,UAAIF,SAAS,CAAC7B,MAAd,EAAsB;AACpBwB,QAAAA,KAAK,IAAK,iCAAgCtB,YAAY,CAAC,CAAC,GAAGoB,YAAJ,EAAkBO,SAAS,CAAC,CAAD,CAA3B,CAAD,CAAkC,IAAxF;AACD;AACF;;AAED,WAAO;AACLE,MAAAA,OAAO,EAAE,KADJ;AAELP,MAAAA;AAFK,KAAP;AAID;;AAED,QAAM,CAACc,YAAD,IAAiBhB,YAAvB;AACA,SAAO;AACLS,IAAAA,OAAO,EAAE,IADJ;AAELjD,IAAAA,KAAK,EAAE,CAAC,GAAGQ,oBAAoB,CAACP,OAAzB,EAAkCuD,YAAlC,EAAgDxD,KAAhD;AAFF,GAAP;AAID;;AAED,SAASE,QAAT,CAAkBgC,MAAlB,EAA0B;AACxB,SAAOuB,IAAI,IAAI,CAAC,GAAGnD,iBAAiB,CAACL,OAAtB,EAA+B;AAC5CyD,IAAAA,SAAS,EAAE;AACT9C,MAAAA,KAAK,EAAE,CAACC,IAAD,EAAO,GAAGsB,YAAV,KAA2B;AAChC,cAAM;AACJc,UAAAA,OADI;AAEJjD,UAAAA,KAFI;AAGJ0C,UAAAA;AAHI,YAIFT,YAAY,CAACC,MAAD,EAASrB,IAAT,EAAesB,YAAY,CAACjB,MAAb,GAAsBiB,YAAtB,GAAqChB,SAApD,CAJhB;;AAMA,YAAI,CAAC8B,OAAL,EAAc;AACZ,gBAAMQ,IAAI,CAACf,KAAL,CAAWA,KAAX,CAAN;AACD;;AAED,eAAO1C,KAAP;AACD;AAbQ;AADiC,GAA/B,EAgBZyD,IAhBY,CAAf;AAiBD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _postcssFunctions = _interopRequireDefault(require(\"postcss-functions\"));\n\nvar _didyoumean = _interopRequireDefault(require(\"didyoumean\"));\n\nvar _transformThemeValue = _interopRequireDefault(require(\"../util/transformThemeValue\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction findClosestExistingPath(theme, path) {\n  const parts = _lodash.default.toPath(path);\n\n  do {\n    parts.pop();\n    if (_lodash.default.hasIn(theme, parts)) break;\n  } while (parts.length);\n\n  return parts.length ? parts : undefined;\n}\n\nfunction pathToString(path) {\n  if (typeof path === 'string') return path;\n  return path.reduce((acc, cur, i) => {\n    if (cur.includes('.')) return `${acc}[${cur}]`;\n    return i === 0 ? cur : `${acc}.${cur}`;\n  }, '');\n}\n\nfunction list(items) {\n  return items.map(key => `'${key}'`).join(', ');\n}\n\nfunction listKeys(obj) {\n  return list(Object.keys(obj));\n}\n\nfunction validatePath(config, path, defaultValue) {\n  const pathString = Array.isArray(path) ? pathToString(path) : _lodash.default.trim(path, `'\"`);\n  const pathSegments = Array.isArray(path) ? path : _lodash.default.toPath(pathString);\n\n  const value = _lodash.default.get(config.theme, pathString, defaultValue);\n\n  if (typeof value === 'undefined') {\n    let error = `'${pathString}' does not exist in your theme config.`;\n    const parentSegments = pathSegments.slice(0, -1);\n\n    const parentValue = _lodash.default.get(config.theme, parentSegments);\n\n    if (_lodash.default.isObject(parentValue)) {\n      const validKeys = Object.keys(parentValue).filter(key => validatePath(config, [...parentSegments, key]).isValid);\n      const suggestion = (0, _didyoumean.default)(_lodash.default.last(pathSegments), validKeys);\n\n      if (suggestion) {\n        error += ` Did you mean '${pathToString([...parentSegments, suggestion])}'?`;\n      } else if (validKeys.length > 0) {\n        error += ` '${pathToString(parentSegments)}' has the following valid keys: ${list(validKeys)}`;\n      }\n    } else {\n      const closestPath = findClosestExistingPath(config.theme, pathString);\n\n      if (closestPath) {\n        const closestValue = _lodash.default.get(config.theme, closestPath);\n\n        if (_lodash.default.isObject(closestValue)) {\n          error += ` '${pathToString(closestPath)}' has the following keys: ${listKeys(closestValue)}`;\n        } else {\n          error += ` '${pathToString(closestPath)}' is not an object.`;\n        }\n      } else {\n        error += ` Your theme has the following top-level keys: ${listKeys(config.theme)}`;\n      }\n    }\n\n    return {\n      isValid: false,\n      error\n    };\n  }\n\n  if (!(typeof value === 'string' || typeof value === 'number' || typeof value === 'function' || value instanceof String || value instanceof Number || Array.isArray(value))) {\n    let error = `'${pathString}' was found but does not resolve to a string.`;\n\n    if (_lodash.default.isObject(value)) {\n      let validKeys = Object.keys(value).filter(key => validatePath(config, [...pathSegments, key]).isValid);\n\n      if (validKeys.length) {\n        error += ` Did you mean something like '${pathToString([...pathSegments, validKeys[0]])}'?`;\n      }\n    }\n\n    return {\n      isValid: false,\n      error\n    };\n  }\n\n  const [themeSection] = pathSegments;\n  return {\n    isValid: true,\n    value: (0, _transformThemeValue.default)(themeSection)(value)\n  };\n}\n\nfunction _default(config) {\n  return root => (0, _postcssFunctions.default)({\n    functions: {\n      theme: (path, ...defaultValue) => {\n        const {\n          isValid,\n          value,\n          error\n        } = validatePath(config, path, defaultValue.length ? defaultValue : undefined);\n\n        if (!isValid) {\n          throw root.error(error);\n        }\n\n        return value;\n      }\n    }\n  })(root);\n}"]},"metadata":{},"sourceType":"script"}