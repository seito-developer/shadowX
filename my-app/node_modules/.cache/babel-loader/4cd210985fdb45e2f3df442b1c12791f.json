{"ast":null,"code":"/**\n * @module lib/embed\n */\nimport { isVimeoUrl, getVimeoUrl } from './functions';\nconst oEmbedParameters = ['autopause', 'autoplay', 'background', 'byline', 'color', 'controls', 'dnt', 'height', 'id', 'loop', 'maxheight', 'maxwidth', 'muted', 'playsinline', 'portrait', 'responsive', 'speed', 'texttrack', 'title', 'transparent', 'url', 'width'];\n/**\n * Get the 'data-vimeo'-prefixed attributes from an element as an object.\n *\n * @param {HTMLElement} element The element.\n * @param {Object} [defaults={}] The default values to use.\n * @return {Object<string, string>}\n */\n\nexport function getOEmbedParameters(element, defaults = {}) {\n  return oEmbedParameters.reduce((params, param) => {\n    const value = element.getAttribute(`data-vimeo-${param}`);\n\n    if (value || value === '') {\n      params[param] = value === '' ? 1 : value;\n    }\n\n    return params;\n  }, defaults);\n}\n/**\n * Create an embed from oEmbed data inside an element.\n *\n * @param {object} data The oEmbed data.\n * @param {HTMLElement} element The element to put the iframe in.\n * @return {HTMLIFrameElement} The iframe embed.\n */\n\nexport function createEmbed({\n  html\n}, element) {\n  if (!element) {\n    throw new TypeError('An element must be provided');\n  }\n\n  if (element.getAttribute('data-vimeo-initialized') !== null) {\n    return element.querySelector('iframe');\n  }\n\n  const div = document.createElement('div');\n  div.innerHTML = html;\n  element.appendChild(div.firstChild);\n  element.setAttribute('data-vimeo-initialized', 'true');\n  return element.querySelector('iframe');\n}\n/**\n * Make an oEmbed call for the specified URL.\n *\n * @param {string} videoUrl The vimeo.com url for the video.\n * @param {Object} [params] Parameters to pass to oEmbed.\n * @param {HTMLElement} element The element.\n * @return {Promise}\n */\n\nexport function getOEmbedData(videoUrl, params = {}, element) {\n  return new Promise((resolve, reject) => {\n    if (!isVimeoUrl(videoUrl)) {\n      throw new TypeError(`“${videoUrl}” is not a vimeo.com url.`);\n    }\n\n    let url = `https://vimeo.com/api/oembed.json?url=${encodeURIComponent(videoUrl)}`;\n\n    for (const param in params) {\n      if (params.hasOwnProperty(param)) {\n        url += `&${param}=${encodeURIComponent(params[param])}`;\n      }\n    }\n\n    const xhr = 'XDomainRequest' in window ? new XDomainRequest() : new XMLHttpRequest();\n    xhr.open('GET', url, true);\n\n    xhr.onload = function () {\n      if (xhr.status === 404) {\n        reject(new Error(`“${videoUrl}” was not found.`));\n        return;\n      }\n\n      if (xhr.status === 403) {\n        reject(new Error(`“${videoUrl}” is not embeddable.`));\n        return;\n      }\n\n      try {\n        const json = JSON.parse(xhr.responseText); // Check api response for 403 on oembed\n\n        if (json.domain_status_code === 403) {\n          // We still want to create the embed to give users visual feedback\n          createEmbed(json, element);\n          reject(new Error(`“${videoUrl}” is not embeddable.`));\n          return;\n        }\n\n        resolve(json);\n      } catch (error) {\n        reject(error);\n      }\n    };\n\n    xhr.onerror = function () {\n      const status = xhr.status ? ` (${xhr.status})` : '';\n      reject(new Error(`There was an error fetching the embed code from Vimeo${status}.`));\n    };\n\n    xhr.send();\n  });\n}\n/**\n * Initialize all embeds within a specific element\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\n\nexport function initializeEmbeds(parent = document) {\n  const elements = [].slice.call(parent.querySelectorAll('[data-vimeo-id], [data-vimeo-url]'));\n\n  const handleError = error => {\n    if ('console' in window && console.error) {\n      console.error(`There was an error creating an embed: ${error}`);\n    }\n  };\n\n  elements.forEach(element => {\n    try {\n      // Skip any that have data-vimeo-defer\n      if (element.getAttribute('data-vimeo-defer') !== null) {\n        return;\n      }\n\n      const params = getOEmbedParameters(element);\n      const url = getVimeoUrl(params);\n      getOEmbedData(url, params, element).then(data => {\n        return createEmbed(data, element);\n      }).catch(handleError);\n    } catch (error) {\n      handleError(error);\n    }\n  });\n}\n/**\n * Resize embeds when messaged by the player.\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\n\nexport function resizeEmbeds(parent = document) {\n  // Prevent execution if users include the player.js script multiple times.\n  if (window.VimeoPlayerResizeEmbeds_) {\n    return;\n  }\n\n  window.VimeoPlayerResizeEmbeds_ = true;\n\n  const onMessage = event => {\n    if (!isVimeoUrl(event.origin)) {\n      return;\n    } // 'spacechange' is fired only on embeds with cards\n\n\n    if (!event.data || event.data.event !== 'spacechange') {\n      return;\n    }\n\n    const iframes = parent.querySelectorAll('iframe');\n\n    for (let i = 0; i < iframes.length; i++) {\n      if (iframes[i].contentWindow !== event.source) {\n        continue;\n      } // Change padding-bottom of the enclosing div to accommodate\n      // card carousel without distorting aspect ratio\n\n\n      const space = iframes[i].parentElement;\n      space.style.paddingBottom = `${event.data.data[0].bottom}px`;\n      break;\n    }\n  };\n\n  window.addEventListener('message', onMessage);\n}","map":{"version":3,"sources":["/Users/seito/Documents/develop/shadowX/my-app/node_modules/@vimeo/player/src/lib/embed.js"],"names":["isVimeoUrl","getVimeoUrl","oEmbedParameters","getOEmbedParameters","element","defaults","reduce","params","param","value","getAttribute","createEmbed","html","TypeError","querySelector","div","document","createElement","innerHTML","appendChild","firstChild","setAttribute","getOEmbedData","videoUrl","Promise","resolve","reject","url","encodeURIComponent","hasOwnProperty","xhr","window","XDomainRequest","XMLHttpRequest","open","onload","status","Error","json","JSON","parse","responseText","domain_status_code","error","onerror","send","initializeEmbeds","parent","elements","slice","call","querySelectorAll","handleError","console","forEach","then","data","catch","resizeEmbeds","VimeoPlayerResizeEmbeds_","onMessage","event","origin","iframes","i","length","contentWindow","source","space","parentElement","style","paddingBottom","bottom","addEventListener"],"mappings":"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","sourcesContent":["/**\n * @module lib/embed\n */\n\nimport { isVimeoUrl, getVimeoUrl } from './functions';\n\nconst oEmbedParameters = [\n    'autopause',\n    'autoplay',\n    'background',\n    'byline',\n    'color',\n    'controls',\n    'dnt',\n    'height',\n    'id',\n    'loop',\n    'maxheight',\n    'maxwidth',\n    'muted',\n    'playsinline',\n    'portrait',\n    'responsive',\n    'speed',\n    'texttrack',\n    'title',\n    'transparent',\n    'url',\n    'width'\n];\n\n/**\n * Get the 'data-vimeo'-prefixed attributes from an element as an object.\n *\n * @param {HTMLElement} element The element.\n * @param {Object} [defaults={}] The default values to use.\n * @return {Object<string, string>}\n */\nexport function getOEmbedParameters(element, defaults = {}) {\n    return oEmbedParameters.reduce((params, param) => {\n        const value = element.getAttribute(`data-vimeo-${param}`);\n\n        if (value || value === '') {\n            params[param] = value === '' ? 1 : value;\n        }\n\n        return params;\n    }, defaults);\n}\n\n/**\n * Create an embed from oEmbed data inside an element.\n *\n * @param {object} data The oEmbed data.\n * @param {HTMLElement} element The element to put the iframe in.\n * @return {HTMLIFrameElement} The iframe embed.\n */\nexport function createEmbed({ html }, element) {\n    if (!element) {\n        throw new TypeError('An element must be provided');\n    }\n\n    if (element.getAttribute('data-vimeo-initialized') !== null) {\n        return element.querySelector('iframe');\n    }\n\n    const div = document.createElement('div');\n    div.innerHTML = html;\n\n    element.appendChild(div.firstChild);\n    element.setAttribute('data-vimeo-initialized', 'true');\n\n    return element.querySelector('iframe');\n}\n\n/**\n * Make an oEmbed call for the specified URL.\n *\n * @param {string} videoUrl The vimeo.com url for the video.\n * @param {Object} [params] Parameters to pass to oEmbed.\n * @param {HTMLElement} element The element.\n * @return {Promise}\n */\nexport function getOEmbedData(videoUrl, params = {}, element) {\n    return new Promise((resolve, reject) => {\n        if (!isVimeoUrl(videoUrl)) {\n            throw new TypeError(`“${videoUrl}” is not a vimeo.com url.`);\n        }\n\n        let url = `https://vimeo.com/api/oembed.json?url=${encodeURIComponent(videoUrl)}`;\n\n        for (const param in params) {\n            if (params.hasOwnProperty(param)) {\n                url += `&${param}=${encodeURIComponent(params[param])}`;\n            }\n        }\n\n        const xhr = 'XDomainRequest' in window ? new XDomainRequest() : new XMLHttpRequest();\n        xhr.open('GET', url, true);\n\n        xhr.onload = function() {\n            if (xhr.status === 404) {\n                reject(new Error(`“${videoUrl}” was not found.`));\n                return;\n            }\n\n            if (xhr.status === 403) {\n                reject(new Error(`“${videoUrl}” is not embeddable.`));\n                return;\n            }\n\n            try {\n                const json = JSON.parse(xhr.responseText);\n                // Check api response for 403 on oembed\n                if (json.domain_status_code === 403) {\n                    // We still want to create the embed to give users visual feedback\n                    createEmbed(json, element);\n                    reject(new Error(`“${videoUrl}” is not embeddable.`));\n                    return;\n                }\n\n                resolve(json);\n            }\n            catch (error) {\n                reject(error);\n            }\n        };\n\n        xhr.onerror = function() {\n            const status = xhr.status ? ` (${xhr.status})` : '';\n            reject(new Error(`There was an error fetching the embed code from Vimeo${status}.`));\n        };\n\n        xhr.send();\n    });\n}\n\n/**\n * Initialize all embeds within a specific element\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\nexport function initializeEmbeds(parent = document) {\n    const elements = [].slice.call(parent.querySelectorAll('[data-vimeo-id], [data-vimeo-url]'));\n\n    const handleError = (error) => {\n        if ('console' in window && console.error) {\n            console.error(`There was an error creating an embed: ${error}`);\n        }\n    };\n\n    elements.forEach((element) => {\n        try {\n            // Skip any that have data-vimeo-defer\n            if (element.getAttribute('data-vimeo-defer') !== null) {\n                return;\n            }\n\n            const params = getOEmbedParameters(element);\n            const url = getVimeoUrl(params);\n\n            getOEmbedData(url, params, element).then((data) => {\n                return createEmbed(data, element);\n            }).catch(handleError);\n        }\n        catch (error) {\n            handleError(error);\n        }\n    });\n}\n\n/**\n * Resize embeds when messaged by the player.\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\nexport function resizeEmbeds(parent = document) {\n    // Prevent execution if users include the player.js script multiple times.\n    if (window.VimeoPlayerResizeEmbeds_) {\n        return;\n    }\n    window.VimeoPlayerResizeEmbeds_ = true;\n\n    const onMessage = (event) => {\n        if (!isVimeoUrl(event.origin)) {\n            return;\n        }\n\n        // 'spacechange' is fired only on embeds with cards\n        if (!event.data || event.data.event !== 'spacechange') {\n            return;\n        }\n\n        const iframes = parent.querySelectorAll('iframe');\n\n        for (let i = 0; i < iframes.length; i++) {\n            if (iframes[i].contentWindow !== event.source) {\n                continue;\n            }\n\n            // Change padding-bottom of the enclosing div to accommodate\n            // card carousel without distorting aspect ratio\n            const space = iframes[i].parentElement;\n            space.style.paddingBottom = `${event.data.data[0].bottom}px`;\n\n            break;\n        }\n    };\n\n    window.addEventListener('message', onMessage);\n}\n"]},"metadata":{},"sourceType":"module"}