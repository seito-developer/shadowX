{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = fingerprint;\n\nvar _isReactNative = require(\"./isReactNative\");\n\nvar _isReactNative2 = _interopRequireDefault(_isReactNative);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Generate a fingerprint for a file which will be used the store the endpoint\n *\n * @param {File} file\n * @param {Object} options\n * @param {Function} callback\n */\n\n\nfunction fingerprint(file, options, callback) {\n  if ((0, _isReactNative2.default)()) {\n    return callback(null, reactNativeFingerprint(file, options));\n  }\n\n  return callback(null, [\"tus-br\", file.name, file.type, file.size, file.lastModified, options.endpoint].join(\"-\"));\n}\n\nfunction reactNativeFingerprint(file, options) {\n  var exifHash = file.exif ? hashCode(JSON.stringify(file.exif)) : \"noexif\";\n  return [\"tus-rn\", file.name || \"noname\", file.size || \"nosize\", exifHash, options.endpoint].join(\"/\");\n}\n\nfunction hashCode(str) {\n  // from https://stackoverflow.com/a/8831937/151666\n  var hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (var i = 0; i < str.length; i++) {\n    var char = str.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n\n  return hash;\n}","map":{"version":3,"sources":["/Users/seito/Documents/develop/shadowX/node_modules/tus-js-client/lib.es5/browser/fingerprint.js"],"names":["Object","defineProperty","exports","value","default","fingerprint","_isReactNative","require","_isReactNative2","_interopRequireDefault","obj","__esModule","file","options","callback","reactNativeFingerprint","name","type","size","lastModified","endpoint","join","exifHash","exif","hashCode","JSON","stringify","str","hash","length","i","char","charCodeAt"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,WAAlB;;AAEA,IAAIC,cAAc,GAAGC,OAAO,CAAC,iBAAD,CAA5B;;AAEA,IAAIC,eAAe,GAAGC,sBAAsB,CAACH,cAAD,CAA5C;;AAEA,SAASG,sBAAT,CAAgCC,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEN,IAAAA,OAAO,EAAEM;AAAX,GAArC;AAAwD;AAE/F;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASL,WAAT,CAAqBO,IAArB,EAA2BC,OAA3B,EAAoCC,QAApC,EAA8C;AAC5C,MAAI,CAAC,GAAGN,eAAe,CAACJ,OAApB,GAAJ,EAAoC;AAClC,WAAOU,QAAQ,CAAC,IAAD,EAAOC,sBAAsB,CAACH,IAAD,EAAOC,OAAP,CAA7B,CAAf;AACD;;AAED,SAAOC,QAAQ,CAAC,IAAD,EAAO,CAAC,QAAD,EAAWF,IAAI,CAACI,IAAhB,EAAsBJ,IAAI,CAACK,IAA3B,EAAiCL,IAAI,CAACM,IAAtC,EAA4CN,IAAI,CAACO,YAAjD,EAA+DN,OAAO,CAACO,QAAvE,EAAiFC,IAAjF,CAAsF,GAAtF,CAAP,CAAf;AACD;;AAED,SAASN,sBAAT,CAAgCH,IAAhC,EAAsCC,OAAtC,EAA+C;AAC7C,MAAIS,QAAQ,GAAGV,IAAI,CAACW,IAAL,GAAYC,QAAQ,CAACC,IAAI,CAACC,SAAL,CAAed,IAAI,CAACW,IAApB,CAAD,CAApB,GAAkD,QAAjE;AACA,SAAO,CAAC,QAAD,EAAWX,IAAI,CAACI,IAAL,IAAa,QAAxB,EAAkCJ,IAAI,CAACM,IAAL,IAAa,QAA/C,EAAyDI,QAAzD,EAAmET,OAAO,CAACO,QAA3E,EAAqFC,IAArF,CAA0F,GAA1F,CAAP;AACD;;AAED,SAASG,QAAT,CAAkBG,GAAlB,EAAuB;AACrB;AACA,MAAIC,IAAI,GAAG,CAAX;;AACA,MAAID,GAAG,CAACE,MAAJ,KAAe,CAAnB,EAAsB;AACpB,WAAOD,IAAP;AACD;;AACD,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAAG,CAACE,MAAxB,EAAgCC,CAAC,EAAjC,EAAqC;AACnC,QAAIC,IAAI,GAAGJ,GAAG,CAACK,UAAJ,CAAeF,CAAf,CAAX;AACAF,IAAAA,IAAI,GAAG,CAACA,IAAI,IAAI,CAAT,IAAcA,IAAd,GAAqBG,IAA5B;AACAH,IAAAA,IAAI,GAAGA,IAAI,GAAGA,IAAd,CAHmC,CAGf;AACrB;;AACD,SAAOA,IAAP;AACD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = fingerprint;\n\nvar _isReactNative = require(\"./isReactNative\");\n\nvar _isReactNative2 = _interopRequireDefault(_isReactNative);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Generate a fingerprint for a file which will be used the store the endpoint\n *\n * @param {File} file\n * @param {Object} options\n * @param {Function} callback\n */\nfunction fingerprint(file, options, callback) {\n  if ((0, _isReactNative2.default)()) {\n    return callback(null, reactNativeFingerprint(file, options));\n  }\n\n  return callback(null, [\"tus-br\", file.name, file.type, file.size, file.lastModified, options.endpoint].join(\"-\"));\n}\n\nfunction reactNativeFingerprint(file, options) {\n  var exifHash = file.exif ? hashCode(JSON.stringify(file.exif)) : \"noexif\";\n  return [\"tus-rn\", file.name || \"noname\", file.size || \"nosize\", exifHash, options.endpoint].join(\"/\");\n}\n\nfunction hashCode(str) {\n  // from https://stackoverflow.com/a/8831937/151666\n  var hash = 0;\n  if (str.length === 0) {\n    return hash;\n  }\n  for (var i = 0; i < str.length; i++) {\n    var char = str.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n  return hash;\n}"]},"metadata":{},"sourceType":"script"}