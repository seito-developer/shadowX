{"ast":null,"code":"import { parse as e } from \"postcss\";\nimport t from \"postcss-selector-parser\";\nimport { access as s, readFile as r, constants as i } from \"fs\";\nimport { promisify as a } from \"util\";\nimport n from \"glob\";\nimport o from \"path\";\nconst c = {\n  css: [],\n  content: [],\n  defaultExtractor: e => e.match(/[A-Za-z0-9_-]+/g) || [],\n  extractors: [],\n  fontFace: !1,\n  keyframes: !1,\n  rejected: !1,\n  stdin: !1,\n  stdout: !1,\n  variables: !1,\n  safelist: {\n    standard: [],\n    deep: [],\n    greedy: [],\n    variables: [],\n    keyframes: []\n  },\n  blocklist: []\n},\n      l = [\"*\", \"::-webkit-scrollbar\", \"::selection\", \":root\", \"::before\", \"::after\"];\n\nclass u {\n  constructor(e) {\n    this.nodes = [], this.isUsed = !1, this.value = e;\n  }\n\n}\n\nclass h {\n  constructor() {\n    this.nodes = new Map(), this.usedVariables = new Set(), this.safelist = [];\n  }\n\n  addVariable(e) {\n    const {\n      prop: t\n    } = e;\n\n    if (!this.nodes.has(t)) {\n      const s = new u(e);\n      this.nodes.set(t, s);\n    }\n  }\n\n  addVariableUsage(e, t) {\n    const {\n      prop: s\n    } = e,\n          r = this.nodes.get(s);\n\n    for (const e of t) {\n      const t = e[1];\n\n      if (this.nodes.has(t)) {\n        const e = this.nodes.get(t);\n        null == r || r.nodes.push(e);\n      }\n    }\n  }\n\n  addVariableUsageInProperties(e) {\n    for (const t of e) {\n      const e = t[1];\n      this.usedVariables.add(e);\n    }\n  }\n\n  setAsUsed(e) {\n    const t = [this.nodes.get(e)];\n\n    for (; 0 !== t.length;) {\n      const e = t.pop();\n      e && !e.isUsed && (e.isUsed = !0, t.push(...e.nodes));\n    }\n  }\n\n  removeUnused() {\n    for (const e of this.usedVariables) this.setAsUsed(e);\n\n    for (const [e, t] of this.nodes) t.isUsed || this.isVariablesSafelisted(e) || t.value.remove();\n  }\n\n  isVariablesSafelisted(e) {\n    return this.safelist.some(t => \"string\" == typeof t ? t === e : t.test(e));\n  }\n\n}\n\nfunction d(e, t) {\n  t && t.forEach(e.add, e);\n}\n\nclass f {\n  constructor(e) {\n    this.undetermined = new Set(), this.attrNames = new Set(), this.attrValues = new Set(), this.classes = new Set(), this.ids = new Set(), this.tags = new Set(), this.merge(e);\n  }\n\n  merge(e) {\n    return Array.isArray(e) ? d(this.undetermined, e) : e instanceof f ? (d(this.undetermined, e.undetermined), d(this.attrNames, e.attrNames), d(this.attrValues, e.attrValues), d(this.classes, e.classes), d(this.ids, e.ids), d(this.tags, e.tags)) : (d(this.undetermined, e.undetermined), e.attributes && (d(this.attrNames, e.attributes.names), d(this.attrValues, e.attributes.values)), d(this.classes, e.classes), d(this.ids, e.ids), d(this.tags, e.tags)), this;\n  }\n\n  hasAttrName(e) {\n    return this.attrNames.has(e) || this.undetermined.has(e);\n  }\n\n  someAttrValue(e) {\n    for (const t of this.attrValues) if (e(t)) return !0;\n\n    for (const t of this.undetermined) if (e(t)) return !0;\n\n    return !1;\n  }\n\n  hasAttrPrefix(e) {\n    return this.someAttrValue(t => t.startsWith(e));\n  }\n\n  hasAttrSuffix(e) {\n    return this.someAttrValue(t => t.endsWith(e));\n  }\n\n  hasAttrSubstr(e) {\n    return this.someAttrValue(t => t.includes(e));\n  }\n\n  hasAttrValue(e) {\n    return this.attrValues.has(e) || this.undetermined.has(e);\n  }\n\n  hasClass(e) {\n    return this.classes.has(e) || this.undetermined.has(e);\n  }\n\n  hasId(e) {\n    return this.ids.has(e) || this.undetermined.has(e);\n  }\n\n  hasTag(e) {\n    return this.tags.has(e) || this.undetermined.has(e);\n  }\n\n}\n\nconst m = {\n  access: a(s),\n  readFile: a(r)\n};\n\nfunction p(e = []) {\n  return Array.isArray(e) ? { ...c.safelist,\n    standard: e\n  } : { ...c.safelist,\n    ...e\n  };\n}\n\nasync function g(e = \"purgecss.config.js\") {\n  let t;\n\n  try {\n    const s = o.join(process.cwd(), e);\n    t = await import(s);\n  } catch (e) {\n    throw new Error(\"Error loading the config file \" + e.message);\n  }\n\n  return { ...c,\n    ...t,\n    safelist: p(t.safelist)\n  };\n}\n\nasync function v(e, t) {\n  return new f(await t(e));\n}\n\nfunction y(e, t) {\n  switch (t) {\n    case \"next\":\n      return e.text.includes(\"purgecss ignore\");\n\n    case \"start\":\n      return e.text.includes(\"purgecss start ignore\");\n\n    case \"end\":\n      return e.text.includes(\"purgecss end ignore\");\n  }\n}\n\nfunction S(...e) {\n  const t = new f([]);\n  return e.forEach(t.merge, t), t;\n}\n\nfunction b(e) {\n  return e.replace(/(^[\"'])|([\"']$)/g, \"\");\n}\n\nfunction w(e, t) {\n  if (!t.hasAttrName(e.attribute)) return !1;\n  if (void 0 === e.value) return !0;\n\n  switch (e.operator) {\n    case \"$=\":\n      return t.hasAttrSuffix(e.value);\n\n    case \"~=\":\n    case \"*=\":\n      return t.hasAttrSubstr(e.value);\n\n    case \"=\":\n      return t.hasAttrValue(e.value);\n\n    case \"|=\":\n    case \"^=\":\n      return t.hasAttrPrefix(e.value);\n\n    default:\n      return !0;\n  }\n}\n\nfunction F(e, t) {\n  return t.hasId(e.value);\n}\n\nfunction A(e, t) {\n  return t.hasTag(e.value);\n}\n\nfunction V(e) {\n  return \"atrule\" === (null == e ? void 0 : e.type);\n}\n\nfunction x(e) {\n  return \"rule\" === (null == e ? void 0 : e.type);\n}\n\nclass k {\n  constructor() {\n    this.ignore = !1, this.atRules = {\n      fontFace: [],\n      keyframes: []\n    }, this.usedAnimations = new Set(), this.usedFontFaces = new Set(), this.selectorsRemoved = new Set(), this.variablesStructure = new h(), this.options = c;\n  }\n\n  collectDeclarationsData(e) {\n    const {\n      prop: t,\n      value: s\n    } = e;\n\n    if (this.options.variables) {\n      const r = function (e, t) {\n        const s = [];\n        return e.replace(t, function () {\n          const t = arguments,\n                r = Array.prototype.slice.call(t, 0, -2);\n          return r.input = t[t.length - 1], r.index = t[t.length - 2], s.push(r), e;\n        }), s;\n      }(s, /var\\((.+?)[,)]/g);\n\n      t.startsWith(\"--\") ? (this.variablesStructure.addVariable(e), r.length > 0 && this.variablesStructure.addVariableUsage(e, r)) : r.length > 0 && this.variablesStructure.addVariableUsageInProperties(r);\n    }\n\n    if (!this.options.keyframes || \"animation\" !== t && \"animation-name\" !== t) {\n      if (this.options.fontFace) {\n        if (\"font-family\" === t) for (const e of s.split(\",\")) {\n          const t = b(e.trim());\n          this.usedFontFaces.add(t);\n        }\n      } else ;\n    } else for (const e of s.split(/[\\s,]+/)) this.usedAnimations.add(e);\n  }\n\n  getFileExtractor(e, t) {\n    const s = t.find(t => t.extensions.find(t => e.endsWith(t)));\n    return void 0 === s ? this.options.defaultExtractor : s.extractor;\n  }\n\n  async extractSelectorsFromFiles(e, t) {\n    const s = new f([]);\n\n    for (const r of e) {\n      let e = [];\n\n      try {\n        await m.access(r, i.F_OK), e.push(r);\n      } catch (t) {\n        e = n.sync(r, {\n          nodir: !0\n        });\n      }\n\n      for (const r of e) {\n        const e = await m.readFile(r, \"utf-8\"),\n              i = this.getFileExtractor(r, t),\n              a = await v(e, i);\n        s.merge(a);\n      }\n    }\n\n    return s;\n  }\n\n  async extractSelectorsFromString(e, t) {\n    const s = new f([]);\n\n    for (const {\n      raw: r,\n      extension: i\n    } of e) {\n      const e = this.getFileExtractor(\".\" + i, t),\n            a = await v(r, e);\n      s.merge(a);\n    }\n\n    return s;\n  }\n\n  evaluateAtRule(e) {\n    if (this.options.keyframes && e.name.endsWith(\"keyframes\")) this.atRules.keyframes.push(e);else if (this.options.fontFace && \"font-face\" === e.name && e.nodes) for (const t of e.nodes) \"decl\" === t.type && \"font-family\" === t.prop && this.atRules.fontFace.push({\n      name: b(t.value),\n      node: e\n    });\n  }\n\n  async evaluateRule(e, s) {\n    if (this.ignore) return;\n    const r = e.prev();\n    if (function (e) {\n      return \"comment\" === (null == e ? void 0 : e.type);\n    }(r) && y(r, \"next\")) return void r.remove();\n    if (e.parent && V(e.parent) && \"keyframes\" === e.parent.name) return;\n    if (!x(e)) return;\n    if (function (e) {\n      let t = !1;\n      return e.walkComments(e => {\n        e && \"comment\" === e.type && e.text.includes(\"purgecss ignore current\") && (t = !0, e.remove());\n      }), t;\n    }(e)) return;\n    let i = !0;\n    if (e.selector = t(e => {\n      e.walk(e => {\n        \"selector\" === e.type && (i = this.shouldKeepSelector(e, s), i || (this.options.rejected && this.selectorsRemoved.add(e.toString()), e.remove()));\n      });\n    }).processSync(e.selector), i && void 0 !== e.nodes) for (const t of e.nodes) \"decl\" === t.type && this.collectDeclarationsData(t);\n    const a = e.parent;\n    e.selector || e.remove(), function (e) {\n      return !!(x(e) && !e.selector || (null == e ? void 0 : e.nodes) && !e.nodes.length || V(e) && (!e.nodes && !e.params || !e.params && e.nodes && !e.nodes.length));\n    }(a) && (null == a || a.remove());\n  }\n\n  async getPurgedCSS(t, s) {\n    const r = [],\n          i = [];\n\n    for (const e of t) \"string\" == typeof e ? i.push(...n.sync(e, {\n      nodir: !0\n    })) : i.push(e);\n\n    for (const t of i) {\n      const i = \"string\" == typeof t ? this.options.stdin ? t : await m.readFile(t, \"utf-8\") : t.raw,\n            a = e(i);\n      this.walkThroughCSS(a, s), this.options.fontFace && this.removeUnusedFontFaces(), this.options.keyframes && this.removeUnusedKeyframes(), this.options.variables && this.removeUnusedCSSVariables();\n      const n = {\n        css: a.toString(),\n        file: \"string\" == typeof t ? t : void 0\n      };\n      \"string\" == typeof t && (n.file = t), this.options.rejected && (n.rejected = Array.from(this.selectorsRemoved), this.selectorsRemoved.clear()), r.push(n);\n    }\n\n    return r;\n  }\n\n  isKeyframesSafelisted(e) {\n    return this.options.safelist.keyframes.some(t => \"string\" == typeof t ? t === e : t.test(e));\n  }\n\n  isSelectorBlocklisted(e) {\n    return this.options.blocklist.some(t => \"string\" == typeof t ? t === e : t.test(e));\n  }\n\n  isSelectorSafelisted(e) {\n    const t = this.options.safelist.standard.some(t => \"string\" == typeof t ? t === e : t.test(e));\n    return l.includes(e) || t;\n  }\n\n  isSelectorSafelistedDeep(e) {\n    return this.options.safelist.deep.some(t => t.test(e));\n  }\n\n  isSelectorSafelistedGreedy(e) {\n    return this.options.safelist.greedy.some(t => t.test(e));\n  }\n\n  async purge(e) {\n    this.options = \"object\" != typeof e ? await g(e) : { ...c,\n      ...e,\n      safelist: p(e.safelist)\n    };\n    const {\n      content: t,\n      css: s,\n      extractors: r,\n      safelist: i\n    } = this.options;\n    this.options.variables && (this.variablesStructure.safelist = i.variables || []);\n    const a = t.filter(e => \"string\" == typeof e),\n          n = t.filter(e => \"object\" == typeof e),\n          o = await this.extractSelectorsFromFiles(a, r),\n          l = await this.extractSelectorsFromString(n, r);\n    return this.getPurgedCSS(s, S(o, l));\n  }\n\n  removeUnusedCSSVariables() {\n    this.variablesStructure.removeUnused();\n  }\n\n  removeUnusedFontFaces() {\n    for (const {\n      name: e,\n      node: t\n    } of this.atRules.fontFace) this.usedFontFaces.has(e) || t.remove();\n  }\n\n  removeUnusedKeyframes() {\n    for (const e of this.atRules.keyframes) this.usedAnimations.has(e.params) || this.isKeyframesSafelisted(e.params) || e.remove();\n  }\n\n  getSelectorValue(e) {\n    return \"attribute\" === e.type && e.attribute || e.value;\n  }\n\n  shouldKeepSelector(e, t) {\n    if (function (e) {\n      return e.parent && \"pseudo\" === e.parent.type && e.parent.value.startsWith(\":\") || !1;\n    }(e)) return !0;\n\n    if (this.options.safelist.greedy.length > 0) {\n      if (e.nodes.map(this.getSelectorValue).some(e => e && this.isSelectorSafelistedGreedy(e))) return !0;\n    }\n\n    let s = !1;\n\n    for (const i of e.nodes) {\n      const e = this.getSelectorValue(i);\n      if (e && this.isSelectorSafelistedDeep(e)) return !0;\n      if (e && (l.includes(e) || this.isSelectorSafelisted(e))) s = !0;else {\n        if (e && this.isSelectorBlocklisted(e)) return !1;\n\n        switch (i.type) {\n          case \"attribute\":\n            s = !![\"value\", \"checked\", \"selected\", \"open\"].includes(i.attribute) || w(i, t);\n            break;\n\n          case \"class\":\n            r = i, s = t.hasClass(r.value);\n            break;\n\n          case \"id\":\n            s = F(i, t);\n            break;\n\n          case \"tag\":\n            s = A(i, t);\n            break;\n\n          default:\n            continue;\n        }\n\n        if (!s) return !1;\n      }\n    }\n\n    var r;\n    return s;\n  }\n\n  walkThroughCSS(e, t) {\n    e.walk(e => \"rule\" === e.type ? this.evaluateRule(e, t) : \"atrule\" === e.type ? this.evaluateAtRule(e) : void (\"comment\" === e.type && (y(e, \"start\") ? (this.ignore = !0, e.remove()) : y(e, \"end\") && (this.ignore = !1, e.remove()))));\n  }\n\n}\n\nexport default k;\nexport { k as PurgeCSS, c as defaultOptions, S as mergeExtractorSelectors, g as setOptions, p as standardizeSafelist };","map":{"version":3,"sources":["/Users/seito/Documents/develop/count-jp/my-app/node_modules/purgecss/lib/purgecss.esm.js"],"names":["parse","e","t","access","s","readFile","r","constants","i","promisify","a","n","o","c","css","content","defaultExtractor","match","extractors","fontFace","keyframes","rejected","stdin","stdout","variables","safelist","standard","deep","greedy","blocklist","l","u","constructor","nodes","isUsed","value","h","Map","usedVariables","Set","addVariable","prop","has","set","addVariableUsage","get","push","addVariableUsageInProperties","add","setAsUsed","length","pop","removeUnused","isVariablesSafelisted","remove","some","test","d","forEach","f","undetermined","attrNames","attrValues","classes","ids","tags","merge","Array","isArray","attributes","names","values","hasAttrName","someAttrValue","hasAttrPrefix","startsWith","hasAttrSuffix","endsWith","hasAttrSubstr","includes","hasAttrValue","hasClass","hasId","hasTag","m","p","g","join","process","cwd","Error","message","v","y","text","S","b","replace","w","attribute","operator","F","A","V","type","x","k","ignore","atRules","usedAnimations","usedFontFaces","selectorsRemoved","variablesStructure","options","collectDeclarationsData","arguments","prototype","slice","call","input","index","split","trim","getFileExtractor","find","extensions","extractor","extractSelectorsFromFiles","F_OK","sync","nodir","extractSelectorsFromString","raw","extension","evaluateAtRule","name","node","evaluateRule","prev","parent","walkComments","selector","walk","shouldKeepSelector","toString","processSync","params","getPurgedCSS","walkThroughCSS","removeUnusedFontFaces","removeUnusedKeyframes","removeUnusedCSSVariables","file","from","clear","isKeyframesSafelisted","isSelectorBlocklisted","isSelectorSafelisted","isSelectorSafelistedDeep","isSelectorSafelistedGreedy","purge","filter","getSelectorValue","map","PurgeCSS","defaultOptions","mergeExtractorSelectors","setOptions","standardizeSafelist"],"mappings":"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","sourcesContent":["import{parse as e}from\"postcss\";import t from\"postcss-selector-parser\";import{access as s,readFile as r,constants as i}from\"fs\";import{promisify as a}from\"util\";import n from\"glob\";import o from\"path\";const c={css:[],content:[],defaultExtractor:e=>e.match(/[A-Za-z0-9_-]+/g)||[],extractors:[],fontFace:!1,keyframes:!1,rejected:!1,stdin:!1,stdout:!1,variables:!1,safelist:{standard:[],deep:[],greedy:[],variables:[],keyframes:[]},blocklist:[]},l=[\"*\",\"::-webkit-scrollbar\",\"::selection\",\":root\",\"::before\",\"::after\"];class u{constructor(e){this.nodes=[],this.isUsed=!1,this.value=e}}class h{constructor(){this.nodes=new Map,this.usedVariables=new Set,this.safelist=[]}addVariable(e){const{prop:t}=e;if(!this.nodes.has(t)){const s=new u(e);this.nodes.set(t,s)}}addVariableUsage(e,t){const{prop:s}=e,r=this.nodes.get(s);for(const e of t){const t=e[1];if(this.nodes.has(t)){const e=this.nodes.get(t);null==r||r.nodes.push(e)}}}addVariableUsageInProperties(e){for(const t of e){const e=t[1];this.usedVariables.add(e)}}setAsUsed(e){const t=[this.nodes.get(e)];for(;0!==t.length;){const e=t.pop();e&&!e.isUsed&&(e.isUsed=!0,t.push(...e.nodes))}}removeUnused(){for(const e of this.usedVariables)this.setAsUsed(e);for(const[e,t]of this.nodes)t.isUsed||this.isVariablesSafelisted(e)||t.value.remove()}isVariablesSafelisted(e){return this.safelist.some((t=>\"string\"==typeof t?t===e:t.test(e)))}}function d(e,t){t&&t.forEach(e.add,e)}class f{constructor(e){this.undetermined=new Set,this.attrNames=new Set,this.attrValues=new Set,this.classes=new Set,this.ids=new Set,this.tags=new Set,this.merge(e)}merge(e){return Array.isArray(e)?d(this.undetermined,e):e instanceof f?(d(this.undetermined,e.undetermined),d(this.attrNames,e.attrNames),d(this.attrValues,e.attrValues),d(this.classes,e.classes),d(this.ids,e.ids),d(this.tags,e.tags)):(d(this.undetermined,e.undetermined),e.attributes&&(d(this.attrNames,e.attributes.names),d(this.attrValues,e.attributes.values)),d(this.classes,e.classes),d(this.ids,e.ids),d(this.tags,e.tags)),this}hasAttrName(e){return this.attrNames.has(e)||this.undetermined.has(e)}someAttrValue(e){for(const t of this.attrValues)if(e(t))return!0;for(const t of this.undetermined)if(e(t))return!0;return!1}hasAttrPrefix(e){return this.someAttrValue((t=>t.startsWith(e)))}hasAttrSuffix(e){return this.someAttrValue((t=>t.endsWith(e)))}hasAttrSubstr(e){return this.someAttrValue((t=>t.includes(e)))}hasAttrValue(e){return this.attrValues.has(e)||this.undetermined.has(e)}hasClass(e){return this.classes.has(e)||this.undetermined.has(e)}hasId(e){return this.ids.has(e)||this.undetermined.has(e)}hasTag(e){return this.tags.has(e)||this.undetermined.has(e)}}const m={access:a(s),readFile:a(r)};function p(e=[]){return Array.isArray(e)?{...c.safelist,standard:e}:{...c.safelist,...e}}async function g(e=\"purgecss.config.js\"){let t;try{const s=o.join(process.cwd(),e);t=await import(s)}catch(e){throw new Error(\"Error loading the config file \"+e.message)}return{...c,...t,safelist:p(t.safelist)}}async function v(e,t){return new f(await t(e))}function y(e,t){switch(t){case\"next\":return e.text.includes(\"purgecss ignore\");case\"start\":return e.text.includes(\"purgecss start ignore\");case\"end\":return e.text.includes(\"purgecss end ignore\")}}function S(...e){const t=new f([]);return e.forEach(t.merge,t),t}function b(e){return e.replace(/(^[\"'])|([\"']$)/g,\"\")}function w(e,t){if(!t.hasAttrName(e.attribute))return!1;if(void 0===e.value)return!0;switch(e.operator){case\"$=\":return t.hasAttrSuffix(e.value);case\"~=\":case\"*=\":return t.hasAttrSubstr(e.value);case\"=\":return t.hasAttrValue(e.value);case\"|=\":case\"^=\":return t.hasAttrPrefix(e.value);default:return!0}}function F(e,t){return t.hasId(e.value)}function A(e,t){return t.hasTag(e.value)}function V(e){return\"atrule\"===(null==e?void 0:e.type)}function x(e){return\"rule\"===(null==e?void 0:e.type)}class k{constructor(){this.ignore=!1,this.atRules={fontFace:[],keyframes:[]},this.usedAnimations=new Set,this.usedFontFaces=new Set,this.selectorsRemoved=new Set,this.variablesStructure=new h,this.options=c}collectDeclarationsData(e){const{prop:t,value:s}=e;if(this.options.variables){const r=function(e,t){const s=[];return e.replace(t,(function(){const t=arguments,r=Array.prototype.slice.call(t,0,-2);return r.input=t[t.length-1],r.index=t[t.length-2],s.push(r),e})),s}(s,/var\\((.+?)[,)]/g);t.startsWith(\"--\")?(this.variablesStructure.addVariable(e),r.length>0&&this.variablesStructure.addVariableUsage(e,r)):r.length>0&&this.variablesStructure.addVariableUsageInProperties(r)}if(!this.options.keyframes||\"animation\"!==t&&\"animation-name\"!==t)if(this.options.fontFace){if(\"font-family\"===t)for(const e of s.split(\",\")){const t=b(e.trim());this.usedFontFaces.add(t)}}else;else for(const e of s.split(/[\\s,]+/))this.usedAnimations.add(e)}getFileExtractor(e,t){const s=t.find((t=>t.extensions.find((t=>e.endsWith(t)))));return void 0===s?this.options.defaultExtractor:s.extractor}async extractSelectorsFromFiles(e,t){const s=new f([]);for(const r of e){let e=[];try{await m.access(r,i.F_OK),e.push(r)}catch(t){e=n.sync(r,{nodir:!0})}for(const r of e){const e=await m.readFile(r,\"utf-8\"),i=this.getFileExtractor(r,t),a=await v(e,i);s.merge(a)}}return s}async extractSelectorsFromString(e,t){const s=new f([]);for(const{raw:r,extension:i}of e){const e=this.getFileExtractor(\".\"+i,t),a=await v(r,e);s.merge(a)}return s}evaluateAtRule(e){if(this.options.keyframes&&e.name.endsWith(\"keyframes\"))this.atRules.keyframes.push(e);else if(this.options.fontFace&&\"font-face\"===e.name&&e.nodes)for(const t of e.nodes)\"decl\"===t.type&&\"font-family\"===t.prop&&this.atRules.fontFace.push({name:b(t.value),node:e})}async evaluateRule(e,s){if(this.ignore)return;const r=e.prev();if(function(e){return\"comment\"===(null==e?void 0:e.type)}(r)&&y(r,\"next\"))return void r.remove();if(e.parent&&V(e.parent)&&\"keyframes\"===e.parent.name)return;if(!x(e))return;if(function(e){let t=!1;return e.walkComments((e=>{e&&\"comment\"===e.type&&e.text.includes(\"purgecss ignore current\")&&(t=!0,e.remove())})),t}(e))return;let i=!0;if(e.selector=t((e=>{e.walk((e=>{\"selector\"===e.type&&(i=this.shouldKeepSelector(e,s),i||(this.options.rejected&&this.selectorsRemoved.add(e.toString()),e.remove()))}))})).processSync(e.selector),i&&void 0!==e.nodes)for(const t of e.nodes)\"decl\"===t.type&&this.collectDeclarationsData(t);const a=e.parent;e.selector||e.remove(),function(e){return!!(x(e)&&!e.selector||(null==e?void 0:e.nodes)&&!e.nodes.length||V(e)&&(!e.nodes&&!e.params||!e.params&&e.nodes&&!e.nodes.length))}(a)&&(null==a||a.remove())}async getPurgedCSS(t,s){const r=[],i=[];for(const e of t)\"string\"==typeof e?i.push(...n.sync(e,{nodir:!0})):i.push(e);for(const t of i){const i=\"string\"==typeof t?this.options.stdin?t:await m.readFile(t,\"utf-8\"):t.raw,a=e(i);this.walkThroughCSS(a,s),this.options.fontFace&&this.removeUnusedFontFaces(),this.options.keyframes&&this.removeUnusedKeyframes(),this.options.variables&&this.removeUnusedCSSVariables();const n={css:a.toString(),file:\"string\"==typeof t?t:void 0};\"string\"==typeof t&&(n.file=t),this.options.rejected&&(n.rejected=Array.from(this.selectorsRemoved),this.selectorsRemoved.clear()),r.push(n)}return r}isKeyframesSafelisted(e){return this.options.safelist.keyframes.some((t=>\"string\"==typeof t?t===e:t.test(e)))}isSelectorBlocklisted(e){return this.options.blocklist.some((t=>\"string\"==typeof t?t===e:t.test(e)))}isSelectorSafelisted(e){const t=this.options.safelist.standard.some((t=>\"string\"==typeof t?t===e:t.test(e)));return l.includes(e)||t}isSelectorSafelistedDeep(e){return this.options.safelist.deep.some((t=>t.test(e)))}isSelectorSafelistedGreedy(e){return this.options.safelist.greedy.some((t=>t.test(e)))}async purge(e){this.options=\"object\"!=typeof e?await g(e):{...c,...e,safelist:p(e.safelist)};const{content:t,css:s,extractors:r,safelist:i}=this.options;this.options.variables&&(this.variablesStructure.safelist=i.variables||[]);const a=t.filter((e=>\"string\"==typeof e)),n=t.filter((e=>\"object\"==typeof e)),o=await this.extractSelectorsFromFiles(a,r),l=await this.extractSelectorsFromString(n,r);return this.getPurgedCSS(s,S(o,l))}removeUnusedCSSVariables(){this.variablesStructure.removeUnused()}removeUnusedFontFaces(){for(const{name:e,node:t}of this.atRules.fontFace)this.usedFontFaces.has(e)||t.remove()}removeUnusedKeyframes(){for(const e of this.atRules.keyframes)this.usedAnimations.has(e.params)||this.isKeyframesSafelisted(e.params)||e.remove()}getSelectorValue(e){return\"attribute\"===e.type&&e.attribute||e.value}shouldKeepSelector(e,t){if(function(e){return e.parent&&\"pseudo\"===e.parent.type&&e.parent.value.startsWith(\":\")||!1}(e))return!0;if(this.options.safelist.greedy.length>0){if(e.nodes.map(this.getSelectorValue).some((e=>e&&this.isSelectorSafelistedGreedy(e))))return!0}let s=!1;for(const i of e.nodes){const e=this.getSelectorValue(i);if(e&&this.isSelectorSafelistedDeep(e))return!0;if(e&&(l.includes(e)||this.isSelectorSafelisted(e)))s=!0;else{if(e&&this.isSelectorBlocklisted(e))return!1;switch(i.type){case\"attribute\":s=!![\"value\",\"checked\",\"selected\",\"open\"].includes(i.attribute)||w(i,t);break;case\"class\":r=i,s=t.hasClass(r.value);break;case\"id\":s=F(i,t);break;case\"tag\":s=A(i,t);break;default:continue}if(!s)return!1}}var r;return s}walkThroughCSS(e,t){e.walk((e=>\"rule\"===e.type?this.evaluateRule(e,t):\"atrule\"===e.type?this.evaluateAtRule(e):void(\"comment\"===e.type&&(y(e,\"start\")?(this.ignore=!0,e.remove()):y(e,\"end\")&&(this.ignore=!1,e.remove())))))}}export default k;export{k as PurgeCSS,c as defaultOptions,S as mergeExtractorSelectors,g as setOptions,p as standardizeSafelist};\n"]},"metadata":{},"sourceType":"module"}