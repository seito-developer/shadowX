{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _postcssValueParser = require('postcss-value-parser');\n\nvar _postcssValueParser2 = _interopRequireDefault(_postcssValueParser);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = function (functions) {\n  function transformValue(node, prop) {\n    var promises = [];\n    var values = (0, _postcssValueParser2.default)(node[prop]).walk(function (part) {\n      promises.push(transform(part));\n    });\n    if ((0, _helpers.hasPromises)(promises)) promises = Promise.all(promises);\n    return (0, _helpers.then)(promises, function () {\n      node[prop] = values.toString();\n    });\n  }\n\n  function transform(node) {\n    if (node.type !== 'function' || !functions.hasOwnProperty(node.value)) return node;\n    var func = functions[node.value];\n    return (0, _helpers.then)(extractArguments(node.nodes), function (args) {\n      var invocation = func.apply(func, args);\n      return (0, _helpers.then)(invocation, function (val) {\n        node.type = 'word';\n        node.value = val;\n        return node;\n      });\n    });\n  }\n\n  function extractArguments(nodes) {\n    nodes = nodes.map(function (node) {\n      return transform(node);\n    });\n    if ((0, _helpers.hasPromises)(nodes)) nodes = Promise.all(nodes);\n    return (0, _helpers.then)(nodes, function (values) {\n      var args = [];\n      var last = values.reduce(function (prev, node) {\n        if (node.type === 'div' && node.value === ',') {\n          args.push(prev);\n          return '';\n        }\n\n        return prev + _postcssValueParser2.default.stringify(node);\n      }, '');\n      if (last) args.push(last);\n      return args;\n    });\n  }\n\n  return function (node) {\n    switch (node.type) {\n      case 'decl':\n        return transformValue(node, 'value');\n\n      case 'atrule':\n        return transformValue(node, 'params');\n\n      case 'rule':\n        return transformValue(node, 'selector');\n    }\n  };\n};\n\nmodule.exports = exports['default'];","map":{"version":3,"sources":["/Users/seito/Documents/develop/count-jp/my-app/node_modules/postcss-functions/dist/lib/transformer.js"],"names":["Object","defineProperty","exports","value","_postcssValueParser","require","_postcssValueParser2","_interopRequireDefault","_helpers","obj","__esModule","default","functions","transformValue","node","prop","promises","values","walk","part","push","transform","hasPromises","Promise","all","then","toString","type","hasOwnProperty","func","extractArguments","nodes","args","invocation","apply","val","map","last","reduce","prev","stringify","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _postcssValueParser = require('postcss-value-parser');\n\nvar _postcssValueParser2 = _interopRequireDefault(_postcssValueParser);\n\nvar _helpers = require('./helpers');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (functions) {\n\n    function transformValue(node, prop) {\n        var promises = [];\n\n        var values = (0, _postcssValueParser2.default)(node[prop]).walk(function (part) {\n            promises.push(transform(part));\n        });\n\n        if ((0, _helpers.hasPromises)(promises)) promises = Promise.all(promises);\n\n        return (0, _helpers.then)(promises, function () {\n            node[prop] = values.toString();\n        });\n    }\n\n    function transform(node) {\n        if (node.type !== 'function' || !functions.hasOwnProperty(node.value)) return node;\n\n        var func = functions[node.value];\n        return (0, _helpers.then)(extractArguments(node.nodes), function (args) {\n            var invocation = func.apply(func, args);\n\n            return (0, _helpers.then)(invocation, function (val) {\n                node.type = 'word';\n                node.value = val;\n                return node;\n            });\n        });\n    }\n\n    function extractArguments(nodes) {\n        nodes = nodes.map(function (node) {\n            return transform(node);\n        });\n\n        if ((0, _helpers.hasPromises)(nodes)) nodes = Promise.all(nodes);\n\n        return (0, _helpers.then)(nodes, function (values) {\n            var args = [];\n            var last = values.reduce(function (prev, node) {\n                if (node.type === 'div' && node.value === ',') {\n                    args.push(prev);\n                    return '';\n                }\n                return prev + _postcssValueParser2.default.stringify(node);\n            }, '');\n\n            if (last) args.push(last);\n\n            return args;\n        });\n    }\n\n    return function (node) {\n        switch (node.type) {\n            case 'decl':\n                return transformValue(node, 'value');\n            case 'atrule':\n                return transformValue(node, 'params');\n            case 'rule':\n                return transformValue(node, 'selector');\n        }\n    };\n};\n\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}